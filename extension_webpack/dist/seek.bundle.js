(()=>{"use strict";console.log("Seek content script loaded.");let o=null;chrome.runtime.onMessage.addListener((e,t,n)=>{console.log("Received message in seek content script:",e),"INITIATE_SCRAPE"===e.type&&(o=e.resumeId,function(){if(console.log("Scraping Seek jobs for resumeId:",o),!o)return void console.error("No resumeId provided to the scraper.");const e=[];document.querySelectorAll("article").forEach((o,t)=>{var n,l,r,a,i;console.log(`Processing article ${t+1}`);const s=o.querySelector('a[data-automation="jobTitle"]'),c=o.querySelector('a[data-automation="jobCompany"]'),d=o.querySelector('span[data-automation="jobShortDescription"]'),u=o.querySelector('span[data-automation="jobSalary"]'),m=o.querySelector('a[data-automation="jobLocation"]');if(s&&c&&d){const o=null===(n=s.textContent)||void 0===n?void 0:n.trim(),t=null===(l=c.textContent)||void 0===l?void 0:l.trim(),g=null===(r=d.textContent)||void 0===r?void 0:r.trim(),p=s.href,v=(null===(a=null==u?void 0:u.textContent)||void 0===a?void 0:a.trim())||null,S=(null===(i=null==m?void 0:m.textContent)||void 0===i?void 0:i.trim())||null;if(o&&t&&g&&p){const n={title:o,company:t,description:g,url:p,salary:v,location:S,source:"seek"};console.log("Found job:",n),e.push(n)}}}),console.log(`Found ${e.length} jobs.`),e.length>0&&(console.log("Sending scraped job data to background script."),chrome.runtime.sendMessage({type:"SCRAPED_JOB_DATA",data:e,resumeId:o}))}())})})();